# ✅ النظام المبسط الجديد

## التغييرات الرئيسية:

### قبل:
```
1. التسجيل
2. إرسال كود تحقق بالبريد
3. إدخال الكود
4. التحقق من البريد
5. انتظار موافقة الأدمن
6. إرسال بريد ترحيبي
```

### بعد (المبسط):
```
1. التسجيل (بريد + كلمة سر)
2. رسالة "حسابك قيد المراجعة"
3. الأدمن يوافق
4. إرسال بريد ترحيبي + مكافأة 5$
5. المستخدم يسجل دخول
```

---

## ما تم إلغاؤه:
- ❌ خطوة التحقق من البريد الإلكتروني
- ❌ إدخال كود من 5 أرقام
- ❌ send-verification-email Edge Function
- ❌ email_verification_codes table

---

## ما تم الاحتفاظ به:
- ✅ send-notification-email (للبريد الترحيبي فقط)
- ✅ موافقة الأدمن
- ✅ مكافأة 5$ عند الموافقة
- ✅ إرسال بريد عند الموافقة

---

## البريد الترحيبي:

يُرسل تلقائياً عندما الأدمن يوافق على الحساب من لوحة الإدارة.

المحتوى:
- مرحباً بك في PromoHive
- حسابك مُفعّل الآن
- حصلت على مكافأة 5$
- يمكنك البدء بالربح

---

## متى يُرسل البريد؟

في ملف: `src/services/adminService.js`

عند استدعاء:
```javascript
await adminService.approveUser(userId)
```

يقوم بـ:
1. تحديث حالة المستخدم → approved
2. إضافة 5$ welcome bonus
3. إرسال بريد ترحيبي عبر send-notification-email

---

## لإعداد RESEND لاحقاً:

عندما تريد تفعيل البريد الإلكتروني:

1. احصل على RESEND_API_KEY من: https://resend.com/api-keys
2. أضفه في Supabase Secrets
3. تأكد من رفع send-notification-email
4. جرب الموافقة على مستخدم من لوحة الإدارة

---

## الملفات المعدلة:

1. `src/pages/register/components/RegistrationForm.jsx`
   - إزالة خطوة verify
   - إضافة خطوة pending
   - تبسيط التسجيل

2. `src/services/verificationService.js`
   - تعطيل إرسال البريد مؤقتاً

---

## للاختبار:

1. سجل حساب جديد
2. يجب أن ترى "Awaiting Admin Approval"
3. اذهب للوحة الإدارة
4. وافق على الحساب
5. (إذا كان RESEND_API_KEY موجوداً) → يصل بريد ترحيبي
6. سجل دخول بالحساب
7. تجد مكافأة 5$ في الرصيد
